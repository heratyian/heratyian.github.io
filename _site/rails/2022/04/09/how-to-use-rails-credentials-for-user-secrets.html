
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML Meta Tags -->
    <title>Ian Heraty</title>
    <meta name="description" content="Ian Heraty's frequently shared links">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="http://www.galactanet.com/oneoff/theegg_mod.html/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Ian Heraty">
    <meta property="og:description" content="Ian Heraty's frequently shared links">
    <meta property="og:image" content="./profile.png">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="galactanet.com">
    <meta property="twitter:url" content="http://www.galactanet.com/oneoff/theegg_mod.html/">
    <meta name="twitter:title" content="Ian Heraty">
    <meta name="twitter:description" content="Ian Heraty's frequently shared links">
    <meta name="twitter:image" content="./profile.png">

    <!-- favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:900|Source+Sans+Pro" rel="stylesheet">
    
    <!-- stylesheet -->
    <link rel="stylesheet" href="/css/styles.css">

    <!-- fontawesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/js/all.min.js"></script>
  </head>

  <body>
    <div class="background--custom isLoaded">

      <a href="/" class="banner">
          <img src="/images/profile.png" alt="Ian Heraty headshot" class="banner-image">
      </a>

      <div class="name">
        How To Use Rails Credentials For User Secrets
      </div>

      <div class="items">
        <h2 id="why">Why</h2>
<p>It is considered good practice to keep sensitive information like api keys and passwords out of source control. One way to do this in rails 6 is with <code class="language-plaintext highlighter-rouge">rails credentials</code>.</p>

<h2 id="how-it-works">How it works</h2>
<p>Your secrets are stored in a .yml file and encrypted in <code class="language-plaintext highlighter-rouge">config/credentials.yml.enc</code> which is tracked in source control. You call 
<code class="language-plaintext highlighter-rouge">EDITOR=vim rails credentials:edit</code> 
to use a terminal editor like vim or 
<code class="language-plaintext highlighter-rouge">EDITOR="code --wait" rails credentials:edit</code>
to use an app like vscode. <code class="language-plaintext highlighter-rouge">credentials</code> decrypts <code class="language-plaintext highlighter-rouge">config/credentials.yml.enc</code> so it can be edited using <code class="language-plaintext highlighter-rouge">config/master.key</code>. <strong>This file should not be tracked in source control.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development:
  aws:
    api_key: &lt;dev-api-key-here&gt;
production:
  aws:
    api_key: &lt;prod-api-key-here&gt;
</code></pre></div></div>

<h2 id="how-to-use-it">How to use it</h2>
<p>You can then access your encrypted key value anywhere in your code using this syntax which handles dev, testing, and production environments.
<code class="language-plaintext highlighter-rouge">Rails.application.credentials[Rails.env.to_sym][:aws][:api_key]</code></p>

<p>In order to access your credential values in production, youâ€™ll need to add config values to hosting provider. In my case, Heroku. In settings, config vars, add a new key RAILS_MASTER_KEY and set the value to the same as your master.key.</p>

      </div>

      <canvas id="canvas" width="774" height="600" class="isLoaded"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/greentfrapp/pocoloco@minigl/minigl.js"></script>
    <script>
      var gradient = new Gradient();
      gradient.initGradient("#canvas");
    </script>
  </body>
</html>
